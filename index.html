<!DOCTYPE html>
<html>
	<head>
		<meta name='viewport' content='width=device-width, initial-scale=1.0' charset="UTF-8">
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
		<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'/>
		<script src='maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
	</head>
	<body>
		<div class='container'>
			<div class='table-responsive'>
				<h1 align='center'>
					CSV File to HTML
				</h1>
				<br/>
				<!-- <div class ='container'> -->
					<!-- <P>
					Lotto Number : {{my_str}}
					</P> -->
				<!-- </div> -->
				<br/>
				<div align='center'>
					<button type='button' name='load_data' id='load_data' class='btn btn-info'>
						Load Data
					</button>
					<button type='button' name='generate_number' id='generate_number' class='btn btn-info'>
						Generate Number
					</button>
				</div>
				<br/>
				<div id='num_arr'></div>
				<br/>
				<div id='lotto_data'></div>
			</div>
		</div>
	</body>
</html>

<script>
$(document).ready(function(){
	$('#load_data').click(function(){
		$.ajax({
			url:"input/lotto_data_train.csv",
			dataType:"text",
			success:function(data){
				var lotto_data = data.split(/\r?\n|\r/);
				var table_data = '<table id="lotto_table" class="table table-bordered table-striped">';
				for(var count=0; count < lotto_data.length; count++){
					var cell_data = lotto_data[count].split(",");
					table_data += '<tr>';
					for(var cell_count=0; cell_count < cell_data.length; cell_count++){
						if(count === 0){
							table_data += '<th>'+cell_data[cell_count]+'</th>';
						}
						else{
							table_data += '<td>'+cell_data[cell_count]+'</td>';
						}
					}
					table_data += '</tr>';
				}
				table_data += '</table>';
				$('#lotto_data').html(table_data)
			}
		});
	});
});
</script>
<script>
$(document).ready(function(){
	$('#generate_number').click(function(){
		var numberList = new Array();
		
		for(var idx=2; idx<9; ++idx) {
			var numbers = new Array();
			var td_num = document.getElementById('lotto_table').querySelectorAll("tr td:nth-child("+idx+")");
			for (var i=0; i < td_num.length; i++) {
				var num = td_num[i].textContent;
				numbers.push(num);
			}
			var randomNumbers = numbers[Math.floor(Math.random() * numbers.length)];
			if (idx<8) {
				if (idx==2){
					numberList.push(randomNumbers+" ");
				}
				else {
					last_num = numberList.slice(-1)[0];
					while(1){
						// if (numberList[numberList.length-1] >= randomNumbers) {
						// 	var randomNumbers = numbers[Math.floor(Math.random() * numbers.length)];
						// 	continue;
						// }
						// else if (numberList[numberList.length-1] < randomNumbers) {
						// 	numberList.push(randomNumbers+" ");
						// 	break;
						// }
						if (last_num >= randomNumbers) {
							var randomNumbers = 0;
							var randomNumbers = numbers[Math.floor(Math.random() * numbers.length)];
							continue;
						}
						else if (last_num < randomNumbers) {
							numberList.push(randomNumbers+" ");
							break;
						}
					}
					// numberList.push(randomNumbers+" ");
				}
			}
			else if (idx==8) {
				numberList.push(randomNumbers+" ");
			}
		}
		// alert('AAA')
		$('#num_arr').html(numberList)
	})
})
</script>