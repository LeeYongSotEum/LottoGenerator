<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
		<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'/>
		<script src='maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
	</head>
	<body>
		<div class='container'>
			<div class='table-responsive'>
				<h1 align='center'>
					CSV File to HTML
				</h1>
				<br/>
				<div class ='container'>
					<P>
					<!-- Lotto Number : {{testDataHtml}} -->
					</P>
					<!-- <ul>
					{% for value in testDataHtml %}
					<li>{{value}}</li>
					{% endfor %}
					</ul>	 -->
				</div>
				<br/>
				<div align='center'>
					<button type='button' name='load_data' id='load_data' class='btn btn-info'>
						Load Data
					</button>
					<button type='button' name='generate_number' id='generate_number' class='btn btn-info'>
						Generate Number
					</button>
				</div>
				<div id='lotto_data'></div>
				<div id='num_arr'></div>
				
			</div>
		</div>
	</body>
</html>

<script>
$(document).ready(function(){
	$('#load_data').click(function(){
		$.ajax({
			url:"lotto_data_train.csv",
			dataType:"text",
			success:function(data){
				var lotto_data = data.split(/\r?\n|\r/);
				var table_data = '<table id="lotto_table" class="table table-bordered table-striped">';
				for(var count=0; count < lotto_data.length; count++){
					var cell_data = lotto_data[count].split(",");
					table_data += '<tr>';
					for(var cell_count=0; cell_count < cell_data.length; cell_count++){
						if(count === 0){
							table_data += '<th>'+cell_data[cell_count]+'</th>';
						}
						else{
							table_data += '<td>'+cell_data[cell_count]+'</td>';
						}
					}
					table_data += '</tr>';
				}
				table_data += '</table>';
				$('#lotto_data').html(table_data)
			}
		});
	});
});
</script>
<script>
$(document).ready(function(){
	$('#generate_number').click(function(){
		var numbers = new Array();
		var td_num1 = document.getElementById('lotto_table').querySelectorAll("tr td:nth-child(2)");
		for (var i=0; i < td_num1.length; ++i) {
			var num1 = td_num1[i].textContent;
			numbers.push(num1)
		}

		var result = new Array();

		numbers.sort();

		for(var value in numbers) {
			var index = numbers[value];
			result[index] = result[index] == undefined ? 1 : result[index] += 1;
		}        
		
		for(var value in result) {
			result[value] /= td_num1.length;
			
		}

		for(var value in result) {
			document.writeln(value+"의 확률 : "+result[value]);
			// $('#num_arr').html(value + "의 중복 개수 : " + result[value]);
		}
	})
})
</script>